/* ═══════════════════════════════════════════════════════════
   VALENTINE'S DAY — REDESIGNED
   Full-screen page transitions · No scrolling
   Palette: #ff4d6d · #ffc2d1 · #fff · #1a1a2e
   ═══════════════════════════════════════════════════════════ */

/* ── RESET ────────────────────────────────────────────── */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --pink: #ff4d6d;
    --blush: #ffc2d1;
    --rose: #ff8fab;
    --white: #ffffff;
    --dark: #1a1a2e;
    --dark2: #16213e;
    --gold: #ffd700;
    --serif: 'Playfair Display', serif;
    --sans: 'Poppins', sans-serif;
    --ease: cubic-bezier(.4, 0, .2, 1);
}

html,
body {
    height: 100%;
    overflow: hidden;
    /* no scroll at all */
    font-family: var(--sans);
    background: var(--dark);
    color: var(--white);
    -webkit-font-smoothing: antialiased;
}

/* ═══════════════════════════════════════════════════════
   PAGE SYSTEM — stacked full-screen, cross-fade
   ═══════════════════════════════════════════════════════ */
.page {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    opacity: 0;
    visibility: hidden;
    transition: opacity .9s var(--ease), visibility .9s;
    z-index: 1;
}

.page--active {
    opacity: 1;
    visibility: visible;
    z-index: 10;
}

/* subtle overlay gradient per page */
.page__overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
}

.page__overlay--hero {
    background: radial-gradient(ellipse at 50% 35%, rgba(50, 18, 48, .8) 0%, var(--dark) 72%);
}

.page__overlay--flower {
    background: radial-gradient(ellipse at 50% 65%, rgba(30, 16, 48, .8) 0%, var(--dark) 72%);
}

.page__overlay--message {
    background: radial-gradient(ellipse at 50% 40%, rgba(50, 18, 48, .7) 0%, var(--dark) 72%);
}

.page__content {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 2rem;
    max-width: 680px;
}

.page__particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
}

/* ── SHARED TEXT STYLES ───────────────────────────────── */
.eyebrow {
    display: inline-block;
    font-weight: 300;
    font-size: .78rem;
    letter-spacing: 4.5px;
    text-transform: uppercase;
    color: var(--blush);
    margin-bottom: 1.2rem;
    opacity: 0;
    animation: fadeUp .8s var(--ease) forwards .3s;
}

.hide-mobile {
    display: inline;
}

/* ═══════════════════════════════════════════════════════
   PAGE 1 — HERO
   ═══════════════════════════════════════════════════════ */
.hero__heading {
    font-family: var(--serif);
    font-weight: 700;
    font-size: clamp(2.6rem, 6.5vw, 5rem);
    line-height: 1.12;
    color: var(--white);
    margin-bottom: 1rem;
    opacity: 0;
    animation: fadeUp 1s var(--ease) forwards .55s;
}

.hero__sub {
    font-weight: 300;
    font-size: clamp(.92rem, 1.8vw, 1.1rem);
    color: rgba(255, 255, 255, .55);
    line-height: 1.75;
    margin-bottom: 2.8rem;
    opacity: 0;
    animation: fadeUp 1s var(--ease) forwards .8s;
}

.hero__buttons {
    display: flex;
    gap: 1.1rem;
    justify-content: center;
    flex-wrap: wrap;
    opacity: 0;
    animation: fadeUp 1s var(--ease) forwards 1.05s;
}

/* ── BUTTONS ──────────────────────────────────────────── */
.btn {
    font-family: var(--sans);
    font-weight: 500;
    font-size: .95rem;
    padding: .85rem 2.5rem;
    border-radius: 60px;
    border: none;
    cursor: pointer;
    letter-spacing: .4px;
    transition: transform .22s var(--ease), box-shadow .3s var(--ease), background .3s;
}

.btn--primary {
    background: linear-gradient(135deg, var(--pink), #e63968);
    color: var(--white);
    box-shadow: 0 4px 28px rgba(255, 77, 109, .3);
}

.btn--primary:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 36px rgba(255, 77, 109, .5);
}

.btn--ghost {
    background: transparent;
    color: var(--blush);
    border: 1.5px solid rgba(255, 194, 209, .4);
}

.btn--ghost:hover {
    background: rgba(255, 194, 209, .08);
    transform: scale(1.04);
}

.btn--small {
    font-size: .85rem;
    padding: .7rem 1.8rem;
}

/* dodging "No" button */
.btn--ghost.dodging {
    position: fixed;
    z-index: 9999;
    transition: none;
}

/* ── HEART BURST ─────────────────────────────────────── */
.heart-burst {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 200;
}

.heart-burst .heart {
    position: absolute;
    font-size: 1.5rem;
    opacity: 0;
    animation: burstHeart 1.5s ease forwards;
}

/* ── GLOW FLASH ──────────────────────────────────────── */
.glow-flash {
    position: absolute;
    inset: 0;
    z-index: 3;
    pointer-events: none;
    background: radial-gradient(circle at 50% 50%, rgba(255, 77, 109, .3), transparent 60%);
    opacity: 0;
    transition: opacity 1s var(--ease);
}

.glow-flash.active {
    opacity: 1;
}

/* ═══════════════════════════════════════════════════════
   PAGE 2 — FLOWER
   ═══════════════════════════════════════════════════════ */

/* grass */
.grass {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 140px;
    pointer-events: none;
    z-index: 0;
}

.grass__blade {
    position: absolute;
    bottom: 0;
    width: 6px;
    border-radius: 50% 50% 0 0;
    background: linear-gradient(to top, #2d5a3d, #3a7d54);
    transform-origin: bottom center;
    animation: sway 4.5s ease-in-out infinite;
}

/* flower container */
.flower {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* stem — below bloom */
.stem {
    width: 5px;
    height: 0;
    background: linear-gradient(to bottom, #5aad6a, #3a7d54);
    border-radius: 3px;
    transform-origin: top center;
}

.stem.grow {
    animation: growStem 1.2s ease forwards;
}

/* leaves on stem */
.leaf {
    position: absolute;
    width: 28px;
    height: 14px;
    border-radius: 50% 0;
    background: linear-gradient(135deg, #5aad6a, #3a7d54);
    opacity: 0;
    z-index: 1;
}

.leaf--left {
    top: 60%;
    left: 50%;
    transform: translateX(-100%) rotate(-30deg);
}

.leaf--right {
    top: 72%;
    left: 50%;
    transform: rotate(30deg);
}

.leaf.show {
    animation: fadeIn .6s ease forwards;
}

/* bloom */
.bloom {
    position: relative;
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: -4px;
    /* overlap stem slightly */
}

/* petals */
.petal {
    position: absolute;
    width: 50px;
    height: 78px;
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    opacity: 0;
    transform: scale(0) rotate(0deg);
    transform-origin: bottom center;
    filter: drop-shadow(0 0 10px rgba(255, 77, 109, .35));
}

/* colour & delay per petal */
.petal--1 {
    background: linear-gradient(135deg, #ff6b8a, #ff4d6d);
    --angle: 0deg;
}

.petal--2 {
    background: linear-gradient(135deg, #ff8fab, #ff6b8a);
    --angle: 45deg;
}

.petal--3 {
    background: linear-gradient(135deg, #ff4d6d, #e63968);
    --angle: 90deg;
}

.petal--4 {
    background: linear-gradient(135deg, #ffc2d1, #ff8fab);
    --angle: 135deg;
}

.petal--5 {
    background: linear-gradient(135deg, #ff6b8a, #ff4d6d);
    --angle: 180deg;
}

.petal--6 {
    background: linear-gradient(135deg, #ff8fab, #ff6b8a);
    --angle: 225deg;
}

.petal--7 {
    background: linear-gradient(135deg, #ff4d6d, #e63968);
    --angle: 270deg;
}

.petal--8 {
    background: linear-gradient(135deg, #ffc2d1, #ff8fab);
    --angle: 315deg;
}

.petal.bloom-anim {
    animation: bloomPetal 1.1s ease forwards;
}

/* stagger delays set from JS */

/* core */
.bloom__core {
    position: relative;
    width: 38px;
    height: 38px;
    background: radial-gradient(circle, var(--gold), #ffb347);
    border-radius: 50%;
    z-index: 5;
    opacity: 0;
    transform: scale(0);
    box-shadow: 0 0 24px rgba(255, 215, 0, .55), 0 0 60px rgba(255, 215, 0, .2);
}

.bloom__core.show {
    animation: coreGlow .9s ease forwards;
}

/* caption */
.flower__caption {
    position: relative;
    z-index: 2;
    font-family: var(--serif);
    font-style: italic;
    font-size: clamp(.95rem, 2vw, 1.15rem);
    color: rgba(255, 255, 255, .5);
    margin-top: 2.2rem;
    opacity: 0;
}

.flower__caption.show {
    animation: fadeUp .8s var(--ease) forwards;
}

/* action buttons */
.flower__actions {
    position: relative;
    z-index: 2;
    display: flex;
    gap: .8rem;
    margin-top: 1.5rem;
}

.flower-btn-hidden {
    opacity: 0;
    pointer-events: none;
}

.flower-btn-visible {
    opacity: 1 !important;
    pointer-events: auto !important;
    animation: fadeIn .6s var(--ease) forwards;
}

/* ═══════════════════════════════════════════════════════
   PAGE 3 — MESSAGE
   ═══════════════════════════════════════════════════════ */
.floating-hearts {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 1;
}

.msg__text {
    font-family: var(--serif);
    font-style: italic;
    font-weight: 400;
    font-size: clamp(1.5rem, 4.2vw, 2.4rem);
    line-height: 1.55;
    color: var(--white);
    min-height: 3em;
}

.msg__text .cursor {
    display: inline-block;
    width: 2px;
    height: 1.05em;
    background: var(--blush);
    margin-left: 3px;
    vertical-align: text-bottom;
    animation: blink .7s step-end infinite;
}

.msg__signature {
    font-family: var(--serif);
    font-style: italic;
    font-size: 1rem;
    color: var(--blush);
    margin-top: 1.8rem;
    opacity: 0;
    transition: opacity .8s var(--ease), transform .8s var(--ease);
    transform: translateY(12px);
}

.msg__signature.show {
    opacity: 1;
    transform: translateY(0);
}

.msg-btn-hidden {
    opacity: 0;
    pointer-events: none;
}

.msg-btn-visible {
    opacity: 1 !important;
    pointer-events: auto !important;
    animation: fadeIn .6s var(--ease) forwards;
}

/* ═══════════════════════════════════════════════════════
   PAGE INDICATOR DOTS
   ═══════════════════════════════════════════════════════ */
.page-dots {
    position: fixed;
    bottom: 1.6rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 500;
    display: flex;
    gap: .6rem;
}

.dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 194, 209, .25);
    transition: background .4s, transform .4s;
}

.dot--active {
    background: var(--pink);
    transform: scale(1.3);
}

/* ═══════════════════════════════════════════════════════
   MUSIC TOGGLE
   ═══════════════════════════════════════════════════════ */
.music-toggle {
    position: fixed;
    bottom: 1.4rem;
    right: 1.4rem;
    z-index: 999;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    border: 1.5px solid rgba(255, 194, 209, .25);
    background: rgba(26, 26, 46, .65);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.15rem;
    transition: transform .22s var(--ease), border-color .3s;
}

.music-toggle:hover {
    transform: scale(1.1);
    border-color: var(--blush);
}

/* ═══════════════════════════════════════════════════════
   PARTICLES — shared
   ═══════════════════════════════════════════════════════ */
.glow-dot {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 194, 209, .5);
    pointer-events: none;
    filter: blur(1px);
    animation: glowDrift linear infinite alternate;
}

.float-heart {
    position: absolute;
    bottom: -40px;
    font-size: 1.2rem;
    opacity: 0;
    animation: floatUp 7s ease-in infinite;
}

/* ═══════════════════════════════════════════════════════
   KEYFRAMES
   ═══════════════════════════════════════════════════════ */
@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(18px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes blink {
    50% {
        opacity: 0;
    }
}

/* heart burst */
@keyframes burstHeart {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(.5);
    }

    100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(1.4) rotate(var(--rot));
    }
}

/* stem */
@keyframes growStem {
    from {
        height: 0;
    }

    to {
        height: 110px;
    }
}

/* petal bloom */
@keyframes bloomPetal {
    0% {
        opacity: 0;
        transform: scale(0) rotate(var(--angle)) translateY(0);
    }

    60% {
        opacity: 1;
        transform: scale(1.12) rotate(var(--angle)) translateY(-56px);
    }

    100% {
        opacity: 1;
        transform: scale(1) rotate(var(--angle)) translateY(-50px);
    }
}

/* core glow */
@keyframes coreGlow {
    from {
        opacity: 0;
        transform: scale(0);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* grass */
@keyframes sway {

    0%,
    100% {
        transform: rotate(-5deg);
    }

    50% {
        transform: rotate(5deg);
    }
}

/* particles */
@keyframes glowDrift {
    0% {
        transform: translateY(0) translateX(0);
        opacity: .35;
    }

    50% {
        opacity: .75;
    }

    100% {
        transform: translateY(-90px) translateX(25px);
        opacity: .25;
    }
}

/* floating hearts */
@keyframes floatUp {
    0% {
        opacity: 0;
        transform: translateY(0) scale(.7);
    }

    10% {
        opacity: .65;
    }

    85% {
        opacity: .35;
    }

    100% {
        opacity: 0;
        transform: translateY(-105vh) scale(1);
    }
}

/* ═══════════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════════ */
@media (max-width: 600px) {
    .hide-mobile {
        display: none;
    }

    .page__content {
        padding: 1.5rem;
    }

    .hero__buttons {
        gap: .7rem;
    }

    .btn {
        padding: .72rem 1.7rem;
        font-size: .88rem;
    }

    .bloom {
        width: 160px;
        height: 160px;
    }

    .petal {
        width: 40px;
        height: 62px;
    }

    .bloom__core {
        width: 30px;
        height: 30px;
    }

    .grass {
        height: 90px;
    }

    .flower__actions {
        flex-direction: column;
        align-items: center;
    }
}